ÐžÑÐ½Ð¾Ð²Ð½Ð¸ Ð±Ð¸Ð·Ð½ÐµÑ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°
Ð’ÑÐµÐºÐ¸ User Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ ÑƒÐ½Ð¸ÐºÐ°Ð»ÐµÐ½
Ð’ÑÐµÐºÐ¸ Ð°ÐºÑ‚Ð¸Ð² Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ ÑƒÐ½Ð¸ÐºÐ°Ð»ÐµÐ½, ÑÑŠÑ Ñ‚Ð¾Ñ‡Ð½Ð° Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð·Ð° Ð¼Ð¾Ð¼ÐµÐ½Ñ‚Ð¾Ð½Ð¾Ñ‚Ð¾ Ð¼Ñƒ ÑÑŠÑÑ‚Ð¾ÑÐ½Ð¸Ðµ
Ð’ÑÑÐºÐ° Ð¿Ð¾Ñ€ÑŠÑ‡ÐºÐ° Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° Ðµ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð°.
ÐÐºÐ¾ Ð¿Ð»Ð°Ñ‰Ð°Ð½ÐµÑ‚Ð¾ Ð½Ðµ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð±ÑŠÐ´Ðµ Ð¸Ð·Ð¿ÑŠÐ»Ð½ÐµÐ½Ð¾, Ð¿Ð¾Ñ€ÑŠÑ‡ÐºÐ°Ñ‚Ð° ÑÑŠÑ‰Ð¾.
Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸Ñ‚Ðµ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÐµ ÑƒÐ½Ð¸ÐºÐ°Ð»Ð½Ð¸, Ð¸Ð·Ñ€ÑÐ´Ð½Ð¸ Ð¸ Ð´Ð¾ÑÑ‚Ð¾Ð²ÐµÑ€Ð½Ð¸.
Ð”Ð°Ð½Ð½Ð¸Ñ‚Ðµ Ñ‚Ñ€ÑÐ±Ð²Ð° Ð´Ð° ÑÐ° Ð½Ð°Ð¿ÑŠÐ»Ð½Ð¾ Ð¸Ð·Ñ€ÑÐ´Ð½Ð¸


izbori si gi
vij si gi
reshi si kakvo koi kkude
i kakvi shte sa vruzkite
ole sq go razbrah kolko e malumno
nishto trqbvashe
malko kick start na zabravena informaciq
veche vsichko moga da narpavq, shtoto vijdam kak se misli
heheha.

Entitita

User   strong
ÐÐºÑ†Ð¸Ñ/ÐÐºÑ‚Ð¸Ð²  strong
ÐŸÐ¾Ñ€Ñ‚Ñ„ÐµÐ»  
ÐšÐ°Ñ€Ñ‚Ð°
Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚
ÐŸÐ¾Ñ€Ñ‚Ñ„Ð¾Ð»Ð¸Ð¾





ÐŸÐ¾Ñ€ÑŠÑ‡ÐºÐ°
Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ
API key
ÐšÐ¾Ð¼ÐµÐ½Ñ‚Ð°Ñ€

Ð¿Ð¾ 3 Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð°



usera ima mnogo poruchki
ima edno portfolio 


ÐµÐ´Ð½Ð° ÑÑŠÑ…Ñ€Ð°Ð½ÐµÐ½Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð°, ÐµÐ´Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸ ÐµÐ´Ð¸Ð½ Ñ‚Ñ€Ð¸Ð³ÐµÑ€.


kato suzdadem user suzdavame wallet?
tranzakcii ima na vsqkude
api_key_id	PK	Ð£Ð½Ð¸ÐºÐ°Ð»ÐµÐ½ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð½Ð° ÐºÐ»ÑŽÑ‡Ð°
user_id	FK	Ð¡Ð²ÑŠÑ€Ð·Ð°Ð½ Ñ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ»
api_key	string	ÐŸÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¸ÑÑ‚ ÐºÐ»ÑŽÑ‡ Ð·Ð° Ð·Ð°ÑÐ²ÐºÐ¸Ñ‚Ðµ
secret_key	string	Ð¡ÐµÐºÑ€ÐµÑ‚Ð½Ð¸ÑÑ‚ ÐºÐ»ÑŽÑ‡ (ÑÑŠÑ…Ñ€Ð°Ð½ÑÐ²Ð° ÑÐµ ÐºÑ€Ð¸Ð¿Ñ‚Ð¸Ñ€Ð°Ð½Ð¾)
permissions	string	ÐŸÑ€Ð¸Ð¼ÐµÑ€: read, trade, withdraw
status	string	ÐÐºÑ‚Ð¸Ð²ÐµÐ½ / Ð”ÐµÐ°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð°Ð½
created_at	datetime	Ð”Ð°Ñ‚Ð° Ð½Ð° ÑÑŠÐ·Ð´Ð°Ð²Ð°Ð½Ðµ
expires_at	datetime	Ð”Ð°Ñ‚Ð° Ð½Ð° Ð¸Ð·Ñ‚Ð¸Ñ‡Ð°Ð½Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»Ð½Ð¾)



CREATE TABLE users (
    id INT PRIMARY KEY,
    status ENUM('active', 'inactive', 'banned')
);



Ð§Ð¾Ð²ÐµÐº Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð¸Ð¼Ð° Ð½ÑÐºÐ¾Ð»ÐºÐ¾ Ð¸Ð¼ÐµÐ¹Ð» Ð°Ð´Ñ€ÐµÑÐ°

ÐŸÐ¾Ñ‚Ñ€ÐµÐ±Ð¸Ñ‚ÐµÐ» Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð¸Ð¼Ð° Ð½ÑÐºÐ¾Ð»ÐºÐ¾ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð½Ð¸ Ð½Ð¾Ð¼ÐµÑ€Ð°

ÐŸÑ€Ð¾Ð´ÑƒÐºÑ‚ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð¸Ð¼Ð° Ð½ÑÐºÐ¾Ð»ÐºÐ¾ ÑÐ½Ð¸Ð¼ÐºÐ¸

ÐÐºÐ¾ ÐµÐ´Ð½Ð¾ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð¾ Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ð¾ ÑÐµ ÑÑ€ÐµÑ‰Ð° Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€ÐµÐ½Ð¾, Ð±ÐµÐ· ÑÐ¾Ð±ÑÑ‚Ð²ÐµÐ½Ð° ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° â€” Ñ‚Ð¾Ð³Ð°Ð²Ð° Ð¼Ð½Ð¾Ð³Ð¾ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ÐµÐ½ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚ Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰.


sex ENUM('Ðœ', 'Ð¤')
CHECK:

sql
Copy code
sex CHAR(1) CHECK (sex IN ('Ðœ', 'Ð¤'))
Ð˜ Ð² Ð´Ð²Ð°Ñ‚Ð° ÑÐ»ÑƒÑ‡Ð°Ñ Ð¿Ð¾Ð»ÐµÑ‚Ð¾ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ðµ ÑÐ°Ð¼Ð¾ Ðœ Ð¸Ð»Ð¸ Ð¤.

â— ÐÐ¾ Ð¸Ð¼Ð° Ð²Ð°Ð¶Ð½Ð¸ Ñ€Ð°Ð·Ð»Ð¸ÐºÐ¸:
ðŸ”¸ 1. ENUM Ðµ Ñ‚Ð¸Ð¿ Ð´Ð°Ð½Ð½Ð¸, CHECK Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ (constraint)
ENUM Ð´ÐµÑ„Ð¸Ð½Ð¸Ñ€Ð° ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÐµÐ½ Ñ‚Ð¸Ð¿ ÐºÐ¾Ð»Ð¾Ð½Ð°, Ð²Ð³Ñ€Ð°Ð´ÐµÐ½ Ð² Ð±Ð°Ð·Ð°Ñ‚Ð°.

CHECK Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¾, ÐºÐ¾ÐµÑ‚Ð¾ ÑÐµ Ð¿Ñ€Ð¸Ð»Ð°Ð³Ð° Ð²ÑŠÑ€Ñ…Ñƒ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚ÐµÐ½ Ñ‚Ð¸Ð¿ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€ CHAR).

ÐŸÑ€Ð¸Ð¼ÐµÑ€:
ENUM = â€œÐ¢Ð¾Ð²Ð° Ð¿Ð¾Ð»Ðµ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ðµ ÑÐ°Ð¼Ð¾ ÐµÐ´Ð½Ð° Ð¾Ñ‚ Ñ‚ÐµÐ·Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸â€.
CHECK = â€œÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ñ‚Ð° Ð¸ Ñ Ð¾Ñ‚Ñ…Ð²ÑŠÑ€Ð»Ð¸, Ð°ÐºÐ¾ Ð½Ðµ Ðµ Ð²Ð°Ð»Ð¸Ð´Ð½Ð°â€.


ENUM Ðµ Ð¿Ð¾-Ð´Ð¾Ð±Ñ€Ð¾Ñ‚Ð¾. Ñ‰Ðµ Ð³Ð¸ ÑÐ¼ÐµÐ½Ñ
Ð½Ð¾ Ð·Ð° Ð´Ñ€ÑƒÐ³Ð¸ ÑÐµ Ð¸Ð·Ð¿Ð¾Ð»Ð·Ð²Ð° Ð¼Ð½Ð¾Ð³Ð¾ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ÐµÐ½ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚.




1. ÐžÑÐ½Ð¾Ð²Ð½Ð° Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð° Person
CREATE TABLE Person (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(100) NOT NULL,
    sex ENUM('Ðœ', 'Ð¤') NOT NULL
);

2. Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° Ð·Ð° Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð½Ð¸Ñ‚Ðµ Ð½Ð¾Ð¼ÐµÑ€Ð°
CREATE TABLE PersonPhone (
    person_id INT NOT NULL,
    phone VARCHAR(20) NOT NULL,
    PRIMARY KEY (person_id, phone),
    FOREIGN KEY (person_id) REFERENCES Person(id)
);


Ð·Ð½Ð°Ñ‡Ð¸ Ð¼Ð½Ð¾Ð³Ð¾ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð½Ð¸Ñ‚Ðµ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð¸ ÑÑ‚Ð°Ð²Ð°Ñ‚ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð¸ ÐµÐ´Ð½Ð¾ ÐºÑŠÐ¼ Ð¼Ð½Ð¾Ð³Ð¾.
Ñ‚Ð¾Ð²Ð° Ðµ Ð¸Ð¼Ð°Ð» Ð¿Ñ€ÐµÐ´Ð²Ð¸Ð´ Ð¿Ð¾Ð´ "ÐœÐ½Ð¾Ð³Ð¾ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚ÐµÐ½ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚ Ðµ ÐºÐ¾Ð³Ð°Ñ‚Ð¾ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð¿Ñ€Ð¸ÐµÐ¼Ðµ Ð½ÑÐºÐ¾Ð»ÐºÐ¾ ÑÑ‚Ð¾Ð¹Ð½Ð¾ÑÑ‚Ð¸ ÐµÐ´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾"


Ð½Ð¾ Ð°Ð· Ñ‰Ðµ Ð³Ð¾ Ð½Ð°Ð¿Ñ€Ð°Ð²Ñ Ñ‚Ð°ÐºÐ° Ð¿Ð¾Ð½ÐµÐ¶Ðµ Ð´Ð° Ð¿Ð¸ÑˆÐ° Ñ‚Ð°ÐºÑŠÐ² Ñ‚ÑŠÐ¿ enum Ñ‰Ðµ Ðµ Ð³Ð»ÑƒÐ¿Ð°Ð²Ð¾.


Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð¸Ñ‚Ðµ ÑÐ° Ð³Ð¾Ñ‚Ð¾Ð²Ð¸. Ð±ÐµÐ· Ð¿Ð¾Ð²ÐµÑ‡Ðµ Ð¿Ñ€Ð¾Ð¼ÑÐ½Ð° Ð³Ð¸ Ð¾ÑÑ‚Ð°Ð²ÑÐ¼. Ð¾ÑÑ‚Ð°Ð½Ð°///

data whearhouse Ð¸Ð·Ñ‚Ð¾Ñ€Ð¸Ñ Ð½Ð° Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² Ð´Ð°Ð´ÐµÐ½ Ð¼Ð¾Ð¼ÐµÐ½Ñ‚ Ð¸ Ð·Ð° Ð´Ð°Ð´ÐµÐ½Ð¾ Ð²Ñ€ÐµÐ¼Ðµ :3

Data Warehouse Ñ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ Ñ‚Ñ€Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð¸ Ñ„Ð°ÐºÑ‚Ð¸ Ð¸ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ ÑˆÐµÑÑ‚ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð¸ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ.  data whearhouse kato tablici.
ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 3 Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð½Ð° Ñ‚ÐµÐ·Ð¸ Ñ‚Ñ€Ð¸ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð¸.
Ñ‚Ð¾Ð²Ð° Ðµ Ð¿Ð¾-Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ½Ð¾.



Ð”Ð¾Ð±Ð°Ð²ÐµÑ‚Ðµ Ð¿Ð¾Ð½Ðµ ÐµÐ´Ð½Ð° ÑÑŠÑ…Ñ€Ð°Ð½ÐµÐ½Ð° Ð¿Ñ€Ð¾Ñ†ÐµÐ´ÑƒÑ€Ð°, ÐµÐ´Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¸ ÐµÐ´Ð¸Ð½ Ñ‚Ñ€Ð¸Ð³ÐµÑ€.  Ð°Ð¼Ð° Ñ‚Ð¾ Ð¿Ð¾ÑÐ»Ðµ s sybota nedelq!







koda



CREATE DATABASE trading_212
use trading_212

use master
drop database trading_212


CREATE TABLE Users (
  user_ID INT IDENTITY(1,1) PRIMARY KEY,
  username nvarchar(255) NOT NULL,
  email nvarchar(255) NOT NULL UNIQUE,
  fname nvarchar(255)	NOT NULL,
  lname nvarchar(255)  NOT NULL,
	birthdate DATETIME  NOT NULL,
	phone_num varchar(15) NOT NULL,
	civil_num  char(10) NOT NULL UNIQUE,
    idcard_num varchar(128) NOT NULL UNIQUE
);



CREATE TABLE Portfolio(
ID	INT PRIMARY KEY REFERENCES Users(user_ID),
profit DECIMAL(18, 4),
risk_index  varchar(12) NOT NULL CHECK (risk_index IN ('Low','Moderate','High','Very High')),
type_ varchar(12)	not null CHECK(type_ in('Guest','Demo','Invest','ISA','CFD','Admin')),
currency INT FOREIGN KEY REFERENCES Currency(ID),
history_log_path NVARCHAR(255) NOT NULL --blob storage path
);


CREATE TABLE Comment(
comment_ID	INT IDENTITY(1,1) PRIMARY KEY,
content nvarchar(1024)	NOT NULL,
created_date DATETIME DEFAULT GETDATE(),
likes INT NOT NULL,
dislikes INT NOT NULL,
parent_comment_id INT NULL FOREIGN KEY REFERENCES Comment(comment_ID) ,
userID INT FOREIGN KEY REFERENCES Users(user_ID)
);

CREATE TABLE API_key(
ID INT IDENTITY(1,1) PRIMARY KEY,
key_token nvarchar(255) NOT NULL,
created_at DATETIME DEFAULT GETDATE(),
exp_date DATETIME NOT NULL,
userID INT FOREIGN KEY REFERENCES Users(user_ID),
permission varchar(30)NOT NULL CHECK(permission IN('GET','PUT/POST','REMOVE','FULL ACCESS'))
);

CREATE TABLE Address_Doc(
ID INT PRIMARY KEY REFERENCES Users(user_ID),
date DATETIME DEFAULT GETDATE(),
validated BIT NOT NULL DEFAULT 0,
doc_path NVARCHAR(255) NOT NULL, --blob storage path


);

CREATE TABLE Transactions(
ID INT PRIMARY KEY IDENTITY(1,1),
userID INT FOREIGN KEY REFERENCES Users(user_ID),
source nvarchar(255) not null,  --reference wallet (acount number)
destination nvarchar(255) not null,
created_at DATETIME default GETDATE(),
amount DECIMAL(18,4) NOT NULL,
status varchar(32) not null check (status IN('created','pending','compleated','failed')),
currency INT FOREIGN KEY REFERENCES Currency(ID),

);

CREATE TABLE Wallet(
ID INT PRIMARY KEY REFERENCES Users(user_ID),
currency INT FOREIGN KEY REFERENCES Currency(ID),
account_num nvarchar(255)NOT NULL UNIQUE,
funds DECIMAL(18,4) NOT NULL CHECK (funds >= 0)
);

CREATE TABLE Cards(
card_ID INT PRIMARY KEY IDENTITY(1,1),
wallet_ID INT REFERENCES Wallet(ID),
daily_amount DECIMAL(18,4)NULL,
exp_date DATETIME NOT NULL,
pin_code CHAR(6) NOT NULL
);

CREATE TABLE Owned_assets(
wallet_ID INT FOREIGN KEY REFERENCES Wallet(ID),
asset_ID INT FOREIGN KEY REFERENCES Asset(asset_ID),
quantity DECIMAL(18,5) NOT NULL CHECK (QUANTITY > 0),
PRIMARY KEY(wallet_ID,asset_ID)

);



CREATE TABLE Asset(
asset_ID INT PRIMARY KEY IDENTITY(1,1),
name nvarchar(255) UNIQUE NOT NULL,
price DECIMAL(18,4) NOT NULL,
type varchar(16) CHECK(type IN('commodities','stocks','CFD','cryptocurrencies'))
);

CREATE TABLE Orders(
ID INT PRIMARY KEY IDENTITY(1,1),
user_ID INT FOREIGN KEY REFERENCES Users(user_ID),
asset_ID INT FOREIGN KEY REFERENCES Asset(asset_ID),
quantity DECIMAL(18,5) NOT NULL CHECK (QUANTITY > 0),
date DATETIME DEFAULT GETDATE()
);


CREATE TABLE Currency(
ID INT PRIMARY KEY IDENTITY(1,1),
currency VARCHAR(64),
currency_code CHAR(3),
);


















